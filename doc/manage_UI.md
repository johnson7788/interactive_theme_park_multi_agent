# 🎨 阿派朗创造力乐园系统

## 管理后台 UI 设计文档（供UI与前端开发使用）
编制人：Johnson Guo
系统架构：Next.js + TypeScript + TailwindCSS

---

## 一、设计目标

管理后台用于：

* 管理游戏主题、NPC角色、任务模板、奖品与打卡点；
* 调用AI生成故事与任务；
* 查看任务数据、用户积分与互动统计。

后台用户为“管理员”“策划人员”，使用设备以桌面端为主（1920×1080）。

---

## 二、信息架构（IA）

**主菜单栏（左侧）结构：**

1. 🎮 游戏与故事管理

   * 游戏主题管理
   * NPC角色管理
   * 故事生成（AI）

2. 🧩 任务与打卡管理

   * 任务模板管理
   * 打卡点配置

3. 👥 用户与奖励

   * 用户列表
   * 奖励设置

4. 📊 数据中心

   * 用户任务进度统计
   * 打卡热力图
   * 积分排行榜

5. ⚙️ 系统设置

   * AI参数配置（温度、模型类型）
   * 账号与权限管理

---

## 三、页面设计规范

### 🎮 1. 游戏与故事管理页

#### 1.1 游戏主题管理页

**功能：**

* 创建、编辑、删除游戏主题
* 配置游戏的场景、周期、可用NPC等

**布局：**

* 顶部工具栏（搜索 + 新建按钮）
* 数据表格（主题名、场景数量、NPC数、状态、操作）
* 右侧滑出编辑面板

**表格字段示例：**

| 游戏名  | 场景数 | NPC数 | 状态  | 更新时间       | 操作      |
| ---- | --- | ---- | --- | ---------- | ------- |
| 星际探险 | 5   | 8    | 进行中 | 2025-10-11 | 编辑 / 删除 |

---

#### 1.2 NPC角色管理页

**功能：**

* 管理所有AI NPC角色
* 绑定游戏主题、角色形象、语气、台词模板
* 触发AI生成对话模板

**布局：**

* 左侧列表：NPC头像 + 名称
* 右侧详情区：角色基本信息 + 对话预览区
* 顶部“AI生成新角色故事”按钮（调用API）

**组件：**

* 上传头像组件（圆形裁剪）
* 语气选择（Select：活泼 / 温柔 / 睿智 / 搞笑）
* 对话模板卡片（可编辑+预览）

---

#### 1.3 故事生成页（AI Story Generator）

**功能：**

* 输入主题信息，自动生成故事背景与任务模板
* 支持人工编辑与保存

**布局：**

* 左侧输入面板：

  * 主题名、场景设定、任务类型多选框
  * “生成故事”按钮（调用后端AI接口）
* 右侧输出面板：

  * 故事文本编辑区（富文本）
  * 任务模板列表（卡片形式）
  * “保存并发布”按钮

**交互：**

* 生成后右侧自动填充
* 可手动编辑再保存

---

### 🧩 2. 任务与打卡管理页

#### 2.1 任务模板管理页

**功能：**

* 管理系统内任务模板（问答 / 采集 / 导流 / 测试）
* 查看触发条件与奖励规则

**布局：**

* 顶部筛选条件：任务类型、多选游戏主题
* 主表格：
  | 任务名称 | 类型 | 奖励 | 触发条件 | 更新时间 | 操作 |
* 右侧弹窗：任务详情编辑（表单+规则配置器）

**特殊交互：**

* 可复制任务模板
* 可通过“AI生成新任务”自动补充内容

---

#### 2.2 打卡点配置页

**功能：**

* 可视化地图（园区示意图） + 打卡点节点
* 每个打卡点可绑定Agent / 任务

**布局：**

* 左：园区地图（上传图片+标点位）
* 右：选中点详情（表单编辑）

**字段：**

* 打卡点ID
* 名称
* 所属区域
* 绑定NPC
* 基础事件设定（问答、采集、导流）
* 奖励设置（可选）

**交互：**

* 点击地图节点 → 弹出配置框
* 拖拽节点调整位置
* 保存后实时预览

---

### 👥 3. 用户与奖励页

#### 3.1 用户列表页

**功能：**

* 查看游客任务完成情况、积分、奖励状态
* 搜索用户（ID / 名字）

**表格字段：**

| 用户ID | 名称 | 当前积分 | 已完成任务 | 获得奖励  | 最后打卡时间           | 操作   |
| ---- | -- | ---- | ----- | ----- | ---------------- | ---- |
| U001 | 小明 | 12   | 5     | 阿派朗徽章 | 2025-10-10 15:40 | 查看详情 |

**点击详情：**

* 展示任务履历、奖励记录（Tab切换）

---

#### 3.2 奖励设置页

**功能：**

* 定义积分对应奖品规则
* 设置限量奖励、时间奖励等

**组件：**

* 表格 + “新增奖励”弹窗
* 奖励类型选择：积分奖励 / 限量 / 地点 / 时间相关

**示例：**

| 奖励名   | 类型 | 条件       | 奖励内容 | 状态 |
| ----- | -- | -------- | ---- | -- |
| 晚餐特惠券 | 时间 | 下午17:00后 | 餐厅特惠 | 启用 |

---

### 📊 4. 数据中心页

**功能：**

* 可视化展示任务完成率、打卡热点、奖励发放数据

**设计要点：**

* 仪表盘风格
* 图表类型：

  * 柱状图：任务完成率
  * 热力图：打卡点活跃度
  * 折线图：每日互动量变化
  * 饼图：任务类型占比
* 支持导出CSV / PDF

---

### ⚙️ 5. 系统设置页

**模块：**

* AI配置（模型选择、Temperature、Max Tokens）
* 账号管理（管理员增删改）
* 操作日志查看

**UI结构：**

* Tab切换 + 简洁表单
* 测试API按钮（调用后端验证）

---

## 四、全局设计规范

| 项目   | 要求                   |
| ---- | -------------------- |
| 主色   | #2E90FA（科技蓝）         |
| 辅色   | #FFCD4B（儿童活力黄）       |
| 背景   | #F7F9FB              |
| 字体   | Inter / 思源黑体         |
| 组件风格 | 圆角16px、阴影柔和、卡片式布局    |
| 图标   | Lucide Icons（线性风格）   |
| 动画   | 微动画反馈（hover、loading） |
| 响应式  | 1280px+ 桌面端优先，平板兼容   |

---

## 五、UI交互逻辑总结

| 页面     | 主动触发     | 响应行为       |
| ------ | -------- | ---------- |
| 故事生成页  | 点击“生成故事” | 调用API并填充内容 |
| 打卡点配置页 | 点击地图节点   | 弹出配置框      |
| 任务模板页  | 编辑奖励条件   | 动态更新预览     |
| 数据中心   | 选择时间范围   | 刷新图表       |
| 用户详情页  | 点击查看     | 展示任务+奖励历史  |

---

## 六、交互原型建议（供UI参考）

| 页面     | 建议原型层级        |
| ------ | ------------- |
| 首页仪表盘  | 一级导航主页        |
| NPC管理页 | 二级（左列表 / 右详情） |
| 故事生成页  | 双栏（左输入 / 右输出） |
| 打卡配置   | 地图+侧栏组合式布局    |
| 用户详情   | 弹出式抽屉或二级页     |

---

## 七、API接口参考（前后端联调用）

| 模块   | 方法       | 路径                          | 说明       |
| ---- | -------- | --------------------------- | -------- |
| 故事生成 | POST     | `/api/admin/agent/generate` | AI生成故事   |
| 任务模板 | GET      | `/api/admin/task/templates` | 获取模板列表   |
| 打卡点  | GET/POST | `/api/admin/checkpoints`    | 读取/更新打卡点 |
| 用户   | GET      | `/api/admin/users`          | 获取用户列表   |
| 数据统计 | GET      | `/api/admin/stats`          | 获取数据概览   |

---